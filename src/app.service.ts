import { Injectable } from '@nestjs/common';
const puppeteer = require('puppeteer');

@Injectable()
export class AppService {
  async getHello() {
    const browser = await puppeteer.launch();
    const page = await browser.newPage();
    const strHtml = `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Document</title></head><body style="text-align:center; font-family: Arial important!;"><div id="pageHeader" style="color: white; background-color: #1976D2; height:100px !important;"><img src="data:image/png;base64,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" style="height:70px !important; float: left; padding-top:15px !important; padding-left:10px !important;"><p style="float:right; padding-right:10px; font-family: Verdana, Arial, Helvetica, sans-serif; font-weight: bold; padding-top:20px;"></p></div><div style="border-top-width: 0px; border-left:10px solid #1976D2; text-align:left; margin-left:20px; padding:0px; margin-top:0px"><p style="margin-left:20px; font-family: 'Open Sans'; font-size=26px;">Detalle de mantenimiento </p></div><div style="border:1px solid #A3C8ED; border-radius:10px; margin:10px;"><div style="border-bottom:1px solid rgba(25, 118, 210, .4); text-align:left; margin-left: 10px; margin-right: 10px;"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIyLjUgMTguMTU2MkMyMi41IDE4LjQ4NzggMjIuNjMxNyAxOC44MDU3IDIyLjg2NjEgMTkuMDQwMUMyMy4xMDA1IDE5LjI3NDYgMjMuNDE4NSAxOS40MDYyIDIzLjc1IDE5LjQwNjJDMjQuMDgxNSAxOS40MDYyIDI0LjM5OTUgMTkuMjc0NiAyNC42MzM5IDE5LjA0MDFDMjQuODY4MyAxOC44MDU3IDI1IDE4LjQ4NzggMjUgMTguMTU2MkMyNSAxNy44MjQ3IDI0Ljg2ODMgMTcuNTA2OCAyNC42MzM5IDE3LjI3MjRDMjQuMzk5NSAxNy4wMzc5IDI0LjA4MTUgMTYuOTA2MiAyMy43NSAxNi45MDYyQzIzLjQxODUgMTYuOTA2MiAyMy4xMDA1IDE3LjAzNzkgMjIuODY2MSAxNy4yNzI0QzIyLjYzMTcgMTcuNTA2OCAyMi41IDE3LjgyNDcgMjIuNSAxOC4xNTYyWiIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC44NyIvPgo8cGF0aCBkPSJNMjkuOTY4NSAxMi45MTkzTDI5LjIyNzkgMTEuNjI1NUMyOS4xOTQ2IDExLjU2ODUgMjkuMTQwMSAxMS41MjY5IDI5LjA3NjMgMTEuNTFDMjkuMDEyNCAxMS40OTMgMjguOTQ0NSAxMS41MDE5IDI4Ljg4NzMgMTEuNTM0OUwyNy4zMDI5IDEyLjQ1OTlMMjQuODU2IDUuNzAzNjNDMjQuNzI2OCA1LjMwMDQ5IDI0LjQ3MjkgNC45NDg4MyAyNC4xMzA4IDQuNjk5NDRDMjMuNzg4NyA0LjQ1MDA0IDIzLjM3NjIgNC4zMTU4MSAyMi45NTI5IDQuMzE2MTNIOS40MTIyNkM4LjMyNzg5IDQuMzE2MTMgNy4zNjUzOSA1LjAxNjEzIDcuMDMxMDEgNi4wNTA1MUw0LjY5OTc2IDEyLjQ2M0wzLjExMjI2IDExLjUzOEMzLjA1NTAzIDExLjUwNTEgMi45ODcwOCAxMS40OTYxIDIuOTIzMjYgMTEuNTEzMUMyLjg1OTQ0IDExLjUzMDEgMi44MDQ5MyAxMS41NzE2IDIuNzcxNjQgMTEuNjI4NkwyLjAzMTAxIDEyLjkxOTNDMS45NjIyNiAxMy4wMzggMi4wMDI4OSAxMy4xODggMi4xMjE2NCAxMy4yNTY4TDQuMDA5MTQgMTQuMzU2OEwzLjU1NjAxIDE1LjYwNjhDMy41MTg1MSAxNS43MDY4IDMuNDk5NzYgMTUuODEzIDMuNDk5NzYgMTUuOTE5M1YyNi44MDA1QzMuNDk5NzYgMjcuMjkxMSAzLjg2ODUxIDI3LjY4OCA0LjMyMTY0IDI3LjY4OEg2LjQzNDE0QzYuODE4NTEgMjcuNjg4IDcuMTUyODkgMjcuMzk3NCA3LjIzNDE0IDI2Ljk5MTFMNy40NzQ3NiAyNS44MTNIMjQuNTI0OEwyNC43NjU0IDI2Ljk5MTFDMjQuODQ5OCAyNy4zOTc0IDI1LjE4MSAyNy42ODggMjUuNTY1NCAyNy42ODhIMjcuNjc3OUMyOC4xMzEgMjcuNjg4IDI4LjQ5OTggMjcuMjkxMSAyOC40OTk4IDI2LjgwMDVWMTUuOTE5M0MyOC40OTk4IDE1LjgxMyAyOC40ODEgMTUuNzA2OCAyOC40NDM1IDE1LjYwNjhMMjcuOTkwNCAxNC4zNTY4TDI5Ljg3NDggMTMuMjU2OEMyOS45MzE1IDEzLjIyNCAyOS45NzMxIDEzLjE3MDMgMjkuOTkwNiAxMy4xMDcyQzMwLjAwODIgMTMuMDQ0MSAzMC4wMDAyIDEyLjk3NjYgMjkuOTY4NSAxMi45MTkzWk05LjE0NjY0IDYuODE2MTNMOS4xNjIyNiA2Ljc3NTUxTDkuMTc0NzYgNi43MzQ4OEM5LjIwOTE0IDYuNjMxNzYgOS4zMDI4OSA2LjU2MzAxIDkuNDEyMjYgNi41NjMwMUgyMi43NzQ4TDI1LjEzMSAxMy4wNjNINi44NzQ3Nkw5LjE0NjY0IDYuODE2MTNaTTI2LjI0OTggMjMuNTYzSDUuNzQ5NzZWMTYuMTU2OEw2LjIzNzI2IDE0LjgxM0gyNS43NjIzTDI2LjI0OTggMTYuMTU2OFYyMy41NjNaIiBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIwLjg3Ii8+CjxwYXRoIGQ9Ik03IDE4LjE1NjJDNyAxOC40ODc4IDcuMTMxNyAxOC44MDU3IDcuMzY2MTIgMTkuMDQwMUM3LjYwMDU0IDE5LjI3NDYgNy45MTg0OCAxOS40MDYyIDguMjUgMTkuNDA2MkM4LjU4MTUyIDE5LjQwNjIgOC44OTk0NiAxOS4yNzQ2IDkuMTMzODggMTkuMDQwMUM5LjM2ODMgMTguODA1NyA5LjUgMTguNDg3OCA5LjUgMTguMTU2MkM5LjUgMTcuODI0NyA5LjM2ODMgMTcuNTA2OCA5LjEzMzg4IDE3LjI3MjRDOC44OTk0NiAxNy4wMzc5IDguNTgxNTIgMTYuOTA2MiA4LjI1IDE2LjkwNjJDNy45MTg0OCAxNi45MDYyIDcuNjAwNTQgMTcuMDM3OSA3LjM2NjEyIDE3LjI3MjRDNy4xMzE3IDE3LjUwNjggNyAxNy44MjQ3IDcgMTguMTU2MlpNMjAuMTI1IDE4Ljg3NUgxOC44NzVDMTguNzM3NSAxOC44NzUgMTguNjI1IDE4Ljk4NzUgMTguNjI1IDE5LjEyNVYyMC4yNUgxMy4zNzVWMTkuMTI1QzEzLjM3NSAxOC45ODc1IDEzLjI2MjUgMTguODc1IDEzLjEyNSAxOC44NzVIMTEuODc1QzExLjczNzUgMTguODc1IDExLjYyNSAxOC45ODc1IDExLjYyNSAxOS4xMjVWMjEuNzVDMTEuNjI1IDIxLjg4NzUgMTEuNzM3NSAyMiAxMS44NzUgMjJIMjAuMTI1QzIwLjI2MjUgMjIgMjAuMzc1IDIxLjg4NzUgMjAuMzc1IDIxLjc1VjE5LjEyNUMyMC4zNzUgMTguOTg3NSAyMC4yNjI1IDE4Ljg3NSAyMC4xMjUgMTguODc1WiIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC44NyIvPgo8L3N2Zz4K" style="float: left; margin-left: 10px; margin-right: 10px;"><h4>2 </h4></div><table style="padding:5px; font-family: Verdana, Arial, Helvetica, sans-serif;"><tr><td style="text-align:left; padding-left:50px; padding-right:50px;"><p style="font-size:12px; color:gray; margin:0px; padding-top:5px;">Tipo de mantenimiento: </p><p style="font-size:24px important!; padding:0px; margin:0px;">Correctivo</p></td><td style="text-align:left; padding-left:50px; padding-right:50px;"><p style="font-size:12px; color:gray; margin:0px; padding-top:5px;">Estado: </p><p style="font-size:24px important!; padding:0px; margin:0px;">1</p></td></tr><tr><td style="text-align:left; padding-left:50px; padding-right:50px;"><p style="font-size:12px; color:gray; margin:0px; padding-top:5px;">Inicio de mantenimiento: </p><p style="font-size:24px important!; padding:0px; margin:0px;">1</p></td><td style="text-align:left; padding-left:50px; padding-right:50px;"><p style="font-size:12px; color:gray; margin:0px; padding-top:5px;">Conductor: </p><p style="font-size:24px important!; padding:0px; margin:0px;">1</p></td></tr><tr><td style="text-align:left; padding-left:50px; padding-right:50px;"><p style="font-size:12px; color:gray; margin:0px; padding-top:5px;">Fin del Mantenimiento: </p><p style="font-size:24px important!; padding:0px; margin:0px;">1</p></td><td style="text-align:left; padding-left:50px; padding-right:50px;"><p style="font-size:12px; color:gray; margin:0px; padding-top:5px;">Responsable: </p><p style="font-size:24px important!; padding:0px; margin:0px;">1</p></td></tr></table>    </div></body></html>`;
    await page.setContent(strHtml);
    await page.pdf({
      displayHeaderFooter: true,
      footerTemplate: `
        <div style="color: lightgray; border-top: solid lightgray 1px; font-size: 10px; padding-top: 5px; text-align: center; width: 100%;">
          <span>This is a test message</span> - <span class="pageNumber"></span>
        </div>
      `,
      format: 'Letter',
      margin: {
        bottom: 70, // minimum required for footer msg to display
        left: 25,
        right: 35,
        top: 30,
      },
      printBackground: true,
      path: 'a.pdf',
    });

    await browser.close();
  }
}
